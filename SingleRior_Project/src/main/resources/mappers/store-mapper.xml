<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mtbatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="storeMapper">

    <resultMap type="StoreBoard" id="=StoreBoardResultSet">
		<id column="BOARD_NO" property="boardNo"/>
		<result column="BOARD_TYPE" property="boardType"/>
		<result column="BOARD_TITLE" property="boardTitle"/>
		<result column="CREATE_DATE" property="createDate"/>
		<result column="B_STATUS" property="boardStatus"/>
		<result column="BOARD_WRITER" property="boardWriter"/>
		<result column="BOARD_COUNT" property="boardCount"/>
		<result column="PRODUCT_NO" property="pNo"/>
		<result column="PRODUCT_PRICE" property="price"/>
		<result column="PRODUCT_DISCOUNT" property="discount"/>
		<result column="PRODUCT_OPTION" property="option"/>
		<result column="MODEL_NAME" property="modelName"/>
		<result column="BRAND" property="brand"/>
		<result column="delivery_payment" property="dPayment"/>
		<result column="PRODUCT_STATUS" property="productStatus"/>
		<result column="PRO_SUBCATE_CODE" property="subCateCode"/>
		<result column="PRO_TOPCATE_CODE" property="topCateCode"/>
	</resultMap>
	
	<resultMap type="Member" id="MemberResultSet">
		<id column="MEMBER_ID" property="memberId"/>
		<result column="MEMBER_PWD" property="memberPwd"/>
		<result column="MEMBER_NAME" property="memberName"/>
		<result column="NICKNAME" property="nickName"/>
		<result column="PHONE" property="phone"/>
		<result column="EMAIL" property="email"/>
		<result column="ADDRESS" property="address"/>
		<result column="STATUS" property="memberStatus"/>
		<result column="AUTHORITY" property="memberAuthority"/>
	</resultMap>
	
	<resultMap type="Attachment" id="attmResultSet">
  		<id column="IMG_NO" property="imgNo"/>
    	<result column="IMG_NAME" property="imgOriginalName"/>
    	<result column="IMG_SERVER_NAME" property="imgRename"/>
    	<result column="IMG_CREATE_DATE" property="imgCreateDate"/>
    	<result column="IMG_MODIFY_DATE" property="imgModifyDate"/>
    	<result column="IMG_STATUS" property="imgStatus"/>
    	<result column="IMG_KEY" property="imgKey"/>
    	<result column="IMG_PATH" property="imgPath"/>
    	<result column="IMG_B_TYPE" property="boardType"/>
    	<result column="IMG_LEVEL" property="level"/>
	 </resultMap>
   
	<select id="getStoreListCount" resultType="_int">
		select count(*)
		from board
		where board_type='1' and b_status = 'Y'
	</select>
	
	<select id="selectStoreBoardList" resultMap="=StoreBoardResultSet">
		select *
		from board
		     join product using (board_no)
		     join product_sub_Cate using(pro_subcate_code)
		     join product_top_Cate using(pro_topcate_code) 
		where b_status = 'Y' and board_type='1'
		order by board_no desc
   </select>
   
  	<!-- 썸네일 -->
    <select id="selectAttmList" resultMap="attmResultSet">
     select *
		from img_repository 
		where img_B_type= '1'
		      and img_level=0
		      and img_status='Y'
	    order by img_key desc
   </select>


</mapper>
